<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ë°©íƒˆì¶œ: ë™ë¬¼ ì•Œì•„ë³´ê¸°</title>
    <style>
        /* ê¸°ë³¸ ì„¤ì • */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* ìŠ¤í¬ë¡¤ ë°©ì§€ */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #333;
        }

        /* === íƒ€ì´ë¨¸ ìŠ¤íƒ€ì¼ (ì¶”ê°€) === */
        #timer {
            display: none; /* ì²˜ìŒì—ëŠ” ìˆ¨ê¹€ */
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 25px;
            border-radius: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            z-index: 1500; /* ëª¨ë‹¬ë³´ë‹¤ ìœ„ì— ìˆë„ë¡ ì„¤ì • */
            border: 2px solid white;
        }

        /* ì‹œì‘ í™”ë©´ ìŠ¤íƒ€ì¼ */
        #start-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(to bottom right, #4a90e2, #2a64a3);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            color: white;
        }
        .start-box {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .start-box h1 { margin-top: 0; font-size: 2.5rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.4); }
        .start-box p { font-size: 1.1rem; margin-bottom: 30px; }
        .start-box input {
            display: block; width: 250px;
            padding: 12px; margin: 10px auto;
            border-radius: 8px; border: 1px solid #ccc;
            font-size: 1rem;
        }
        #start-game-btn {
            background-color: #f5a623; color: white;
            padding: 15px 40px; border: none;
            border-radius: 10px; font-size: 1.2rem;
            font-weight: bold; cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s, transform 0.2s;
        }
        #start-game-btn:hover { background-color: #d88e14; transform: scale(1.05); }

        /* ê²Œì„ ì»¨í…Œì´ë„ˆ: ì²˜ìŒì—ëŠ” ìˆ¨ê¹€ ì²˜ë¦¬ */
        #game-container {
            display: none; /* ì‹œì‘ í™”ë©´ì—ì„œ ë³´ì´ì§€ ì•Šë„ë¡ ìˆ˜ì • */
            position: relative;
            width: 100%;
            max-width: 1280px;
            margin: auto;
        }

        #game-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        .interactive-object {
            position: absolute; cursor: pointer;
            background-color: rgba(255, 255, 0, 0.0);
            border: 2px solid transparent;
            border-radius: 10px;
            transition: background-color 0.3s, border 0.3s;
        }

        .interactive-object:hover {
            background-color: rgba(255, 255, 0, 0.4);
            border: 2px solid yellow;
        }
        
        #obj-popcorn { top: 38%; left: 7%; width: 14%; height: 28%; }
        #obj-chair { top: 75%; left: 32%; width: 15%; height: 20%; }
        #obj-wall { top: 35%; left: 80%; width: 15%; height: 30%; }
        #obj-man { top: 58%; left: 45%; width: 10%; height: 25%; }
        #obj-screen { top: 15%; left: 28%; width: 45%; height: 35%; }

        /* ëª¨ë‹¬ì°½ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .modal-wrapper {
            display: none; position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: white;
            padding: 25px; border-radius: 15px;
            text-align: center; width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .modal-content h2 { margin-top: 0; }
        .modal-content p { margin-bottom: 20px; line-height: 1.6; }
        .modal-content input {
            width: 80%; padding: 10px;
            margin-bottom: 10px; text-align: center;
            font-size: 1.2rem; border: 1px solid #ccc;
            border-radius: 5px;
        }

        .modal-content button {
            padding: 12px 24px; border: none;
            background-color: #007bff; color: white;
            border-radius: 8px; cursor: pointer;
            font-size: 1rem; font-weight: bold;
        }
        .modal-content button:hover { background-color: #0056b3; }
        .close-btn { background-color: #6c757d !important; }
        .close-btn:hover { background-color: #5a6268 !important; }

        .feedback {
            margin-top: 15px;
            font-weight: bold;
            min-height: 20px;
        }

        /* ë©”ëª¨ë¦¬ ì¹´ë“œ ê²Œì„ ìŠ¤íƒ€ì¼ */
        #memory-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        .card {
            aspect-ratio: 1 / 1;
            position: relative; cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        .card.flipped { transform: rotateY(180deg); }
        .card.matched { cursor: default; }

        .card-face {
            position: absolute;
            width: 100%; height: 100%;
            backface-visibility: hidden;
            display: flex; justify-content: center; align-items: center;
            font-size: clamp(1.5rem, 6vw, 2.5rem);
            border-radius: 8px; overflow: hidden;
        }
        .card-front { background-color: #4a90e2; color: white; }
        .card-back { background-color: #f0f0f0; transform: rotateY(180deg); }
    </style>
</head>
<body>
    
    <!-- íƒ€ì´ë¨¸ UI (ì¶”ê°€) -->
    <div id="timer">00:00</div>

    <!-- ì‹œì‘ í™”ë©´ UI -->
    <div id="start-screen">
        <div class="start-box">
            <h1>ë°©íƒˆì¶œ: ë™ë¬¼ ì•Œì•„ë³´ê¸°</h1>
            <p>ì°¸ê°€ì ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”.</p>
            <input type="number" id="player-grade" placeholder="í•™ë…„">
            <input type="number" id="player-class" placeholder="ë°˜">
            <input type="text" id="player-name" placeholder="ì´ë¦„">
            <button id="start-game-btn">ê²Œì„ ì‹œì‘</button>
        </div>
    </div>

    <!-- ê²Œì„ ì»¨í…Œì´ë„ˆ -->
    <div id="game-container">
        <!-- ë°°ê²½ ì´ë¯¸ì§€ -->
        <img src="https://i.ibb.co/sJ5qjbgx/Whisk-eef7dcd82b-5.jpg" alt="ì˜í™”ê´€ ë°°ê²½">

        <!-- í´ë¦­ ê°€ëŠ¥í•œ ì˜¤ë¸Œì íŠ¸ (div) -->
        <div class="interactive-object" id="obj-popcorn" title="íŒì½˜ ê¸°ê³„"></div>
        <div class="interactive-object" id="obj-chair" title="ì˜ì"></div>
        <div class="interactive-object" id="obj-wall" title="ë²½"></div>
        <div class="interactive-object" id="obj-man" title="ì¤‘ì•™ì˜ ë‚¨ì"></div>
        <div class="interactive-object" id="obj-screen" title="ì˜í™”ê´€ í™”ë©´ (íƒˆì¶œêµ¬)"></div>
    </div>

    <!-- ê°ì¢… ëª¨ë‹¬ (HTML êµ¬ì¡°ëŠ” ë³€ê²½ ì—†ìŒ) -->
    <div id="modal-hint" class="modal-wrapper">
        <div class="modal-content">
            <h2>íŒíŠ¸ ë°œê²¬!</h2>
            <p>íƒˆì¶œì„ ìœ„í•œ ë¹„ë°€ë²ˆí˜¸ëŠ” ì–´ë”˜ê°€ì—ì„œ ì°¾ì„ ìˆ˜ ìˆëŠ” 'ë‘ ê°œì˜ ìˆ«ì'ë¥¼ ìˆœì„œëŒ€ë¡œ ì¡°í•©í•œ ë„¤ ìë¦¬ ìˆ«ìì…ë‹ˆë‹¤.</p>
            <button class="close-btn">ë‹«ê¸°</button>
        </div>
    </div>
    <div id="modal-problem1" class="modal-wrapper">
        <div class="modal-content">
            <h2>ì²« ë²ˆì§¸ ë¬¸ì œ</h2>
            <p>"ì•ˆë…•? ë‚œ ì´ ì˜í™”ê´€ì˜ <strong>1ë²ˆ</strong> ìƒì˜ê´€ ë‹´ë‹¹ìì•¼. <br>ì´ ìˆ«ìë¥¼ ë‘ ìë¦¬ë¡œ ë§Œë“¤ë©´ ë¹„ë°€ë²ˆí˜¸ì˜ ì²« ë¶€ë¶„ì´ ë  ê±°ì•¼."</p>
            <input type="text" id="answer1" placeholder="ë‘ ìë¦¬ ìˆ«ì ì…ë ¥" maxlength="2">
            <button id="submit1">í™•ì¸</button>
            <p id="feedback1" class="feedback"></p>
        </div>
    </div>
    <div id="modal-problem2" class="modal-wrapper">
        <div class="modal-content">
            <h2>ë‘ ë²ˆì§¸ ë¬¸ì œ</h2>
            <p>ì˜ìì— í‹°ì¼“ì´ ë–¨ì–´ì ¸ ìˆë‹¤. <br>"ì´ íŠ¹ë³„ì„ì˜ ê°€ê²©ì€ <strong>18,000ì›</strong>ì…ë‹ˆë‹¤."<br>ê°€ê²©ì—ì„œ 0ì„ ì œì™¸í•œ ì• ë‘ ìë¦¬ ìˆ«ìê°€ ë¹„ë°€ë²ˆí˜¸ì˜ ë‘ ë²ˆì§¸ ë¶€ë¶„ì¸ ê²ƒ ê°™ë‹¤.</p>
            <input type="text" id="answer2" placeholder="ë‘ ìë¦¬ ìˆ«ì ì…ë ¥" maxlength="2">
            <button id="submit2">í™•ì¸</button>
            <p id="feedback2" class="feedback"></p>
        </div>
    </div>
    <div id="modal-minigame" class="modal-wrapper">
        <div class="modal-content">
            <h2>ë™ë¬¼ ì¹´ë“œ ë§ì¶”ê¸°</h2>
            <div id="memory-board"></div>
            <p id="minigame-feedback" class="feedback"></p>
            <button class="close-btn">ë‚˜ê°€ê¸°</button>
        </div>
    </div>
    <div id="modal-final" class="modal-wrapper">
        <div class="modal-content">
            <h2>íƒˆì¶œ ë¹„ë°€ë²ˆí˜¸</h2>
            <p>ì°¾ì•„ë‚¸ ë„¤ ìë¦¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
            <input type="password" id="final-password" maxlength="4" placeholder="****" inputmode="numeric">
            <button id="submit-final">íƒˆì¶œ!</button>
            <p id="final-feedback" class="feedback"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- ë³€ìˆ˜ ì„ ì–¸ ì˜ì—­ ---
            const startScreen = document.getElementById('start-screen');
            const startGameBtn = document.getElementById('start-game-btn');
            const gameContainer = document.getElementById('game-container');
            const timerElement = document.getElementById('timer'); // íƒ€ì´ë¨¸ ìš”ì†Œ

            const objects = {
                popcorn: document.getElementById('obj-popcorn'),
                chair: document.getElementById('obj-chair'),
                wall: document.getElementById('obj-wall'),
                man: document.getElementById('obj-man'),
                screen: document.getElementById('obj-screen')
            };
            const modals = {
                hint: document.getElementById('modal-hint'),
                problem1: document.getElementById('modal-problem1'),
                problem2: document.getElementById('modal-problem2'),
                minigame: document.getElementById('modal-minigame'),
                final: document.getElementById('modal-final')
            };

            // === íƒ€ì´ë¨¸ ê´€ë ¨ ë³€ìˆ˜ (ì¶”ê°€) ===
            let timerInterval;
            let startTime;

            // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì˜ì—­ ---
            
            // 'ê²Œì„ ì‹œì‘' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (ìˆ˜ì •)
            startGameBtn.addEventListener('click', () => {
                startScreen.style.display = 'none'; // ì‹œì‘ í™”ë©´ ìˆ¨ê¸°ê¸°
                gameContainer.style.display = 'block'; // ê²Œì„ í™”ë©´ ë³´ì´ê¸°
                timerElement.style.display = 'block'; // íƒ€ì´ë¨¸ ë³´ì´ê¸°
                
                // íƒ€ì´ë¨¸ ì‹œì‘
                startTime = Date.now();
                timerInterval = setInterval(updateTimer, 1000);
            });

            // ì˜¤ë¸Œì íŠ¸ í´ë¦­ ì´ë²¤íŠ¸
            objects.popcorn.addEventListener('click', () => showModal(modals.hint));
            objects.man.addEventListener('click', () => showModal(modals.problem1));
            objects.chair.addEventListener('click', () => showModal(modals.problem2));
            objects.wall.addEventListener('click', () => {
                showModal(modals.minigame);
                startMemoryGame();
            });
            objects.screen.addEventListener('click', () => showModal(modals.final));

            // ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼
            document.querySelectorAll('.close-btn').forEach(btn => {
                btn.addEventListener('click', () => hideModal(btn.closest('.modal-wrapper')));
            });

            // ë¬¸ì œ 1 ì •ë‹µ ì²˜ë¦¬
            document.getElementById('submit1').addEventListener('click', () => {
                const answer = document.getElementById('answer1').value;
                const feedback = document.getElementById('feedback1');
                if (answer === '01') {
                    feedback.textContent = "ì •ë‹µ! ë¹„ë°€ë²ˆí˜¸ì˜ ì²« ë¶€ë¶„ '01'ì„ ì°¾ì•˜ë‹¤.";
                    feedback.style.color = 'green';
                    setTimeout(() => hideModal(modals.problem1), 1500);
                } else {
                    feedback.textContent = 'ì•„ë‹ˆë‹¤. ë‘ ìë¦¬ ìˆ«ìë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.';
                    feedback.style.color = 'red';
                }
            });

            // ë¬¸ì œ 2 ì •ë‹µ ì²˜ë¦¬
            document.getElementById('submit2').addEventListener('click', () => {
                const answer = document.getElementById('answer2').value;
                const feedback = document.getElementById('feedback2');
                if (answer === '18') {
                    feedback.textContent = "ì •ë‹µ! ë¹„ë°€ë²ˆí˜¸ì˜ ë‘ ë²ˆì§¸ ë¶€ë¶„ '18'ì„ ì°¾ì•˜ë‹¤.";
                    feedback.style.color = 'green';
                    setTimeout(() => hideModal(modals.problem2), 1500);
                } else {
                    feedback.textContent = 'í‹°ì¼“ì— ì íŒ ê°€ê²©ì„ ë‹¤ì‹œ ì˜ ë³´ì.';
                    feedback.style.color = 'red';
                }
            });
            
            // ìµœì¢… ë¹„ë°€ë²ˆí˜¸ ì •ë‹µ ì²˜ë¦¬ (ìˆ˜ì •)
            document.getElementById('submit-final').addEventListener('click', () => {
                const password = document.getElementById('final-password').value;
                const feedback = document.getElementById('final-feedback');
                if (password === '0118') {
                    // íƒ€ì´ë¨¸ ë©ˆì¶”ê¸° (ì¶”ê°€)
                    clearInterval(timerInterval);
                    timerElement.style.color = '#f5a623'; // ì„±ê³µ ì‹œ íƒ€ì´ë¨¸ ìƒ‰ ë³€ê²½

                    const finalTime = timerElement.textContent; // ìµœì¢… ì‹œê°„ ê¸°ë¡

                    // ì„±ê³µ ë©”ì‹œì§€ì— ì†Œìš” ì‹œê°„ í‘œì‹œ
                    document.querySelector('#modal-final .modal-content').innerHTML = `
                        <h2>íƒˆì¶œ ì„±ê³µ!</h2>
                        <p style="font-size: 1.2rem; font-weight: bold;">ì´ ì†Œìš” ì‹œê°„: ${finalTime}</p>
                        <p>ë™ë¬¼ ì¹œêµ¬ë“¤ì´ ë‹¹ì‹ ì„ ì¶•í•˜í•´ì¤ë‹ˆë‹¤!<br>ğŸ¦“ğŸ¦’ğŸ˜ğŸ’ğŸ¦ğŸ…</p>`;
                    
                    timerElement.style.display = 'none'; // ìƒë‹¨ íƒ€ì´ë¨¸ ìˆ¨ê¸°ê¸°
                } else {
                    feedback.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. íŒíŠ¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ì„¸ìš”.';
                    feedback.style.color = 'red';
                }
            });


            // --- í•¨ìˆ˜ ì˜ì—­ ---
            const showModal = (modal) => { modal.style.display = 'flex'; };
            const hideModal = (modal) => { modal.style.display = 'none'; };

            // === íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ì¶”ê°€) ===
            function updateTimer() {
                const elapsedTime = Date.now() - startTime;
                const totalSeconds = Math.floor(elapsedTime / 1000);
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;

                // MM:SS í˜•ì‹ìœ¼ë¡œ ë³€í™˜
                const formattedTime = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                timerElement.textContent = formattedTime;
            }

            // --- ë©”ëª¨ë¦¬ ì¹´ë“œ ê²Œì„ ë¡œì§ (ë³€ê²½ ì—†ìŒ) ---
            const memoryBoard = document.getElementById('memory-board');
            const minigameFeedback = document.getElementById('minigame-feedback');
            const animals = ['ğŸ¦“', 'ğŸ¦’', 'ğŸ˜', 'ğŸ’', 'ğŸ¦', 'ğŸ…'];
            let flippedCards = [];
            let matchedPairs = 0;
            let lockBoard = false;

            function startMemoryGame() {
                matchedPairs = 0;
                lockBoard = false;
                minigameFeedback.textContent = '';
                memoryBoard.innerHTML = '';
                let cardSet = [...animals, ...animals];
                cardSet.sort(() => 0.5 - Math.random());
                cardSet.forEach(animal => {
                    const cardElement = document.createElement('div');
                    cardElement.classList.add('card');
                    cardElement.dataset.animal = animal;
                    cardElement.innerHTML = `
                        <div class="card-face card-front">?</div>
                        <div class="card-face card-back">${animal}</div>
                    `;
                    cardElement.addEventListener('click', () => flipCard(cardElement));
                    memoryBoard.appendChild(cardElement);
                });
            }

            function flipCard(card) {
                if (lockBoard || card.classList.contains('flipped')) return;
                card.classList.add('flipped');
                flippedCards.push(card);
                if (flippedCards.length === 2) {
                    lockBoard = true;
                    checkForMatch();
                }
            }

            function checkForMatch() {
                const [card1, card2] = flippedCards;
                if (card1.dataset.animal === card2.dataset.animal) {
                    card1.classList.add('matched');
                    card2.classList.add('matched');
                    matchedPairs++;
                    flippedCards = [];
                    lockBoard = false;
                    if (matchedPairs === animals.length) {
                        minigameFeedback.textContent = "ëª¨ë“  ë™ë¬¼ ì¹´ë“œë¥¼ ë§ì·„ë‹¤! (í•˜ì§€ë§Œ ì—¬ê¸°ì—” íŒíŠ¸ê°€ ì—†ëŠ” ê²ƒ ê°™ë‹¤...)";
                        minigameFeedback.style.color = 'purple';
                    }
                } else {
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                        flippedCards = [];
                        lockBoard = false;
                    }, 1000);
                }
            }
        });
    </script>
</body>
</html>